[global]
  checkNewVersion = false
  sendAnonymousUsage = false

[[tls.certificates]]
  certFile = "/etc/traefik/certs/default.pem"
  keyFile = "/etc/traefik/certs/default.key"

[tls.stores]
  [tls.stores.default]
    [tls.stores.default.defaultCertificate]
      certFile = "/etc/traefik/certs/default.pem"
      keyFile = "/etc/traefik/certs/default.key"

[http]
  [http.routers]
    [http.routers.consul]
      service = "consul"
      entrypoints = ["https"]
      rule = "HostRegexp(`consul.{domain:.+}`)"
    [http.routers.nomad]
      service = "nomad"
      entrypoints = ["https"]
      rule = "HostRegexp(`nomad.{domain:.+}`)"

  [http.services]
    [http.services.consul.loadBalancer]
      [[http.services.consul.loadBalancer.servers]]
        url = "http://169.254.32.1:8500/"
    [http.services.nomad.loadBalancer]
      [[http.services.nomad.loadBalancer.servers]]
        url = "http://nomad.service.global.consul:4646"
